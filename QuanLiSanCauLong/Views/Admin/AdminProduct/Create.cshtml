@model QuanLiSanCauLong.Models.Product
@{
    ViewData["Title"] = "Thêm sản phẩm";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container py-5">
    <div class="col-lg-7 mx-auto">
        <div class="card border-0 shadow-lg rounded-4">
            <div class="card-body p-5">
                <div class="text-center mb-4">
                    <h3 class="fw-bold">Thêm Sản Phẩm Mới</h3>
                    <p class="text-muted">Nhập thông tin sản phẩm để quản lý kho hàng</p>
                </div>

                <form asp-action="Create" method="post" enctype="multipart/form-data">
                    <div class="row g-3">
                        <div class="col-md-8">
                            <label class="form-label fw-bold small text-uppercase">Tên Sản Phẩm</label>
                            <input asp-for="ProductName" class="form-control rounded-3 py-2 bg-light border-0" placeholder="Nhập tên sản phẩm..." />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label fw-bold small text-uppercase">Mã SKU</label>
                            <input asp-for="ProductCode" class="form-control rounded-3 py-2 bg-light border-0" placeholder="SKU-001" />
                        </div>
                        <div class="col-12">
                            <label class="form-label fw-bold small text-uppercase">Mô Tả</label>
                            <textarea asp-for="Description" class="form-control rounded-3 bg-light border-0" rows="3" placeholder="Mô tả sản phẩm..."></textarea>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold small text-uppercase">Giá (VNĐ)</label>
                            <input asp-for="Price" type="number" class="form-control rounded-3 py-2 bg-light border-0" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold small text-uppercase">Số Lượng/Đơn vị</label>
                            <input asp-for="Unit" class="form-control rounded-3 py-2 bg-light border-0" placeholder="Cái, Bộ, Đôi..." />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold small text-uppercase">Danh mục</label>
                            <select asp-for="CategoryId" class="form-select rounded-3 py-2 bg-light border-0"
                                    asp-items="@(new SelectList(ViewBag.Categories, "CategoryId", "CategoryName"))"></select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold small text-uppercase">Hình ảnh</label>
                            <input type="file" name="ImageFile" class="form-control rounded-3 py-2 bg-light border-0" id="imgInp" accept="image/*" />
                        </div>

                        <div class="col-12 text-center mt-3 d-none" id="previewContainer">
                            <img id="blah" src="#" alt="preview" class="rounded-3 shadow-sm border" style="max-height: 150px;" />
                        </div>

                        <div class="col-12 d-flex gap-2 mt-4">
                            <a asp-action="Index" class="btn btn-light flex-fill fw-bold py-2 rounded-3 text-muted">Hủy</a>
                            <button type="submit" class="btn btn-dark flex-fill fw-bold py-2 rounded-3">Thêm Sản Phẩm</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        imgInp.onchange = evt => {
            const [file] = imgInp.files;
            if (file) {
                blah.src = URL.createObjectURL(file);
                document.getElementById('previewContainer').classList.remove('d-none');
            }
        }
    </script>
}