@model IEnumerable<QuanLiSanCauLong.ViewModels.FacilityCardViewModel>
@{
    ViewData["Title"] = "Danh sách sân cầu lông";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<style>
    :root {
        --primary-purple: #6c33f2;
        --secondary-purple: #8b5cf6;
        --bg-light: #f8fafc;
        --text-dark: #1e293b;
    }

    body {
        background-color: var(--bg-light);
        color: var(--text-dark);
    }

    /* --- HERO SECTION --- */
    .hero-banner {
        background-color: var(--primary-purple);
        padding: 60px 0;
        border-radius: 0 0 50px 50px;
        margin-bottom: -50px;
        position: relative;
        overflow: hidden;
    }

    .hero-content h2 {
        color: white;
        font-weight: 800;
        font-size: 2.5rem;
    }

    .hero-content p {
        color: rgba(255,255,255,0.8);
    }

    /* --- SEARCH BOX --- */
    .search-container {
        background: white;
        padding: 30px;
        border-radius: 24px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.06);
        position: relative;
        z-index: 10;
        margin-bottom: 40px;
    }

    .form-control-custom {
        background-color: #f1f5f9;
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 12px 20px;
    }

        .form-control-custom:focus {
            border-color: var(--primary-purple);
            background: white;
            box-shadow: none;
        }

    .btn-search {
        background-color: var(--primary-purple);
        color: white;
        border-radius: 12px;
        font-weight: 700;
        transition: 0.3s;
    }

        .btn-search:hover {
            background-color: #5621d6;
            transform: translateY(-2px);
        }

    /* --- FACILITY CARD --- */
    .facility-card {
        border: none;
        border-radius: 24px;
        overflow: hidden;
        transition: 0.3s;
        background: white;
    }

        .facility-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

    .img-wrapper {
        position: relative;
        height: 220px;
        overflow: hidden;
    }

        .img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: 0.5s;
        }

    .facility-card:hover .img-wrapper img {
        transform: scale(1.1);
    }

    .badge-rating {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(255,255,255,0.9);
        backdrop-filter: blur(5px);
        padding: 5px 12px;
        border-radius: 10px;
        font-weight: 700;
        color: #f59e0b;
    }

    .card-title {
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 8px;
    }

    .card-info {
        font-size: 0.9rem;
        color: #64748b;
        margin-bottom: 5px;
    }

    .btn-details {
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        color: var(--primary-purple);
        font-weight: 700;
        padding: 10px;
        transition: 0.3s;
    }

        .btn-details:hover {
            background: var(--primary-purple);
            color: white;
            border-color: var(--primary-purple);
        }

    /* --- DECORATION --- */
    .character-small {
        position: absolute;
        bottom: -5px;
        right: 10%;
        display: flex;
        gap: 10px;
        z-index: 1;
    }

    .char-box {
        width: 40px;
        height: 50px;
        border-radius: 12px 12px 0 0;
        position: relative;
    }

    .eye-s {
        width: 6px;
        height: 6px;
        background: white;
        border-radius: 50%;
        position: absolute;
        top: 10px;
    }
</style>

<div class="hero-banner">
    <div class="container hero-content text-center">
        <h2>Danh Sách Sân Cầu Lông</h2>
        <p>Tìm kiếm và đặt sân cầu lông chất lượng cao ngay tại khu vực của bạn</p>
    </div>
    <div class="character-small d-none d-md-flex">
        <div class="char-box" style="background: #ff7a50;"><div class="eye-s" style="left:10px"></div><div class="eye-s" style="right:10px"></div></div>
        <div class="char-box" style="background: #20c997; height: 70px;"><div class="eye-s" style="left:10px"></div><div class="eye-s" style="right:10px"></div></div>
        <div class="char-box" style="background: #ffc400; height: 40px;"><div class="eye-s" style="left:10px"></div><div class="eye-s" style="right:10px"></div></div>
    </div>
</div>

<div class="container">
    <div class="search-container">
        <form asp-action="Index" method="get" class="row g-3">
            <div class="col-md-6">
                <label class="small fw-bold mb-1 ms-1">Tên sân hoặc địa chỉ</label>
                <div class="input-group">
                    <span class="input-group-text border-0 bg-light"><i class="bi bi-search"></i></span>
                    <input type="text" name="search" class="form-control form-control-custom" placeholder="Ví dụ: Thiên Phú, Quận 1...">
                </div>
            </div>
            <div class="col-md-4">
                <label class="small fw-bold mb-1 ms-1">Thành phố</label>
                <select name="city" class="form-select form-control-custom">
                    <option value="">-- Tất cả thành phố --</option>
                    @if (ViewBag.Cities != null)
                    {
                        foreach (var city in ViewBag.Cities)
                        {
                            <option value="@city">@city</option>
                        }
                    }
                </select>
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <button type="submit" class="btn btn-search w-100 h-50">Tìm kiếm</button>
            </div>
        </form>
    </div>

    <div class="row">
        @if (!Model.Any())
        {
            <div class="text-center py-5">
                <i class="bi bi-emoji-frown" style="font-size: 3rem; color: #cbd5e1;"></i>
                <p class="mt-3 text-muted">Không tìm thấy sân nào phù hợp với tìm kiếm của bạn.</p>
            </div>
        }

        @foreach (var item in Model)
        {
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card facility-card h-100">
                    <div class="img-wrapper">
                        <img src="@(string.IsNullOrEmpty(item.ImageUrl) ? "/images/default-badminton.jpg" : item.ImageUrl)" alt="@item.FacilityName">
                        <div class="badge-rating">
                            <i class="bi bi-star-fill me-1"></i> 4.8
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <h5 class="card-title text-truncate">@item.FacilityName</h5>
                        <div class="card-info text-truncate">
                            <i class="bi bi-geo-alt-fill me-2 text-danger"></i>
                            @item.Address, @item.District
                        </div>
                        <div class="card-info">
                            <i class="bi bi-clock-fill me-2 text-primary"></i>
                            @item.OpenTime?.ToString(@"hh\:mm") - @item.CloseTime?.ToString(@"hh\:mm")
                        </div>
                        <div class="mt-3 pt-3 border-top d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-success">100.000 VNĐ/giờ</span>
                            <a asp-action="Details" asp-route-id="@item.FacilityId" class="btn btn-details">Chi tiết</a>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>